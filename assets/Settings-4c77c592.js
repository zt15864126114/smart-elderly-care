import{_ as oe,j as b,r as n,o as w,c as $,a as c,b as e,w as a,x as v,E,p as M,u as y,e as u,t as ne,F as ue,q as se,y as L,M as h,N as I}from"./index-41d7d98c.js";const de={class:"settings"},ie=["src"],me={class:"table-footer"},re={class:"table-footer"},pe={class:"settings-footer"},fe={__name:"Settings",setup(ve){const S=b("basic"),i=b({orgName:"汶上县养老院",address:"山东省济宁市汶上县",phone:"0537-6532556",description:"汶上县养老院是一家专业的养老服务机构，致力于为老年人提供优质的养老服务。",logo:""}),V=b([{username:"admin",name:"管理员",role:"超级管理员",department:"管理部",lastLogin:"2025-02-26 14:30:00",status:1},{username:"nurse1",name:"张丽",role:"护理员",department:"护理部",lastLogin:"2025-02-26 13:20:00",status:1},{username:"doctor1",name:"李腾",role:"医生",department:"医疗部",lastLogin:"2025-02-26 12:15:00",status:1}]),k=b([{name:"超级管理员",description:"系统最高权限，可以进行所有操作",permissions:["dashboard","registration","care","finance"]},{name:"护理员",description:"负责日常护理工作",permissions:["dashboard","care"]},{name:"医生",description:"负责医疗相关工作",permissions:["dashboard","care","registration"]}]),m=b({backupCycle:"daily",logRetention:90,passwordExpiry:90,sessionTimeout:30,enableNotification:!0}),x=b(!1),C=b("add"),s=b({username:"",name:"",role:"",department:""}),j=o=>{const l=new FileReader;l.onload=f=>{i.value.logo=f.target.result},l.readAsDataURL(o.raw)},q=o=>{switch(o){case"超级管理员":return"danger";case"护理员":return"success";case"医生":return"warning";default:return"info"}},G=o=>{v.success(`${o.username} 状态已${o.status===1?"启用":"禁用"}`)},H=o=>{C.value="edit",s.value={...o},x.value=!0},J=o=>{E.confirm(`确定要删除账号 ${o.username} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{V.value=V.value.filter(l=>l.username!==o.username),v.success("删除成功")})},K=()=>{C.value="add",s.value={username:"",name:"",role:"",department:""},x.value=!0},O=()=>{if(C.value==="add")V.value.push({...s.value,lastLogin:"-",status:1}),v.success("添加成功");else{const o=V.value.findIndex(l=>l.username===s.value.username);o!==-1&&(V.value[o]={...V.value[o],...s.value},v.success("修改成功"))}x.value=!1},P=o=>{v.info("角色编辑功能开发中")},Q=o=>{E.confirm(`确定要删除角色 ${o.name} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{k.value=k.value.filter(l=>l.name!==o.name),v.success("删除成功")})},W=()=>{v.info("角色添加功能开发中")},X=()=>{v.success("设置保存成功")},Y=()=>{E.confirm("确定要重置所有设置吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.success("设置已重置")})};return(o,l)=>{const f=n("el-input"),d=n("el-form-item"),g=n("el-icon"),Z=n("el-upload"),N=n("el-form"),U=n("el-tab-pane"),r=n("el-table-column"),ee=n("el-tag"),F=n("el-switch"),p=n("el-button"),A=n("el-button-group"),D=n("el-table"),T=n("el-checkbox"),le=n("el-checkbox-group"),B=n("el-option"),z=n("el-select"),R=n("el-input-number"),ae=n("el-tabs"),te=n("el-dialog");return w(),$("div",de,[l[33]||(l[33]=c("div",{class:"header"},[c("h2",null,"系统设置")],-1)),e(ae,{modelValue:S.value,"onUpdate:modelValue":l[9]||(l[9]=t=>S.value=t),class:"settings-tabs"},{default:a(()=>[e(U,{label:"基础设置",name:"basic"},{default:a(()=>[e(N,{model:i.value,"label-width":"120px"},{default:a(()=>[e(d,{label:"机构名称"},{default:a(()=>[e(f,{modelValue:i.value.orgName,"onUpdate:modelValue":l[0]||(l[0]=t=>i.value.orgName=t),placeholder:"请输入机构名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"机构地址"},{default:a(()=>[e(f,{modelValue:i.value.address,"onUpdate:modelValue":l[1]||(l[1]=t=>i.value.address=t),placeholder:"请输入机构地址"},null,8,["modelValue"])]),_:1}),e(d,{label:"联系电话"},{default:a(()=>[e(f,{modelValue:i.value.phone,"onUpdate:modelValue":l[2]||(l[2]=t=>i.value.phone=t),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(d,{label:"机构简介"},{default:a(()=>[e(f,{modelValue:i.value.description,"onUpdate:modelValue":l[3]||(l[3]=t=>i.value.description=t),type:"textarea",rows:4,placeholder:"请输入机构简介"},null,8,["modelValue"])]),_:1}),e(d,{label:"系统Logo"},{default:a(()=>[e(Z,{class:"avatar-uploader",action:"#","show-file-list":!1,"auto-upload":!1,"on-change":j},{default:a(()=>[i.value.logo?(w(),$("img",{key:0,src:i.value.logo,class:"avatar"},null,8,ie)):(w(),M(g,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[e(y(L))]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(U,{label:"账号设置",name:"account"},{default:a(()=>[e(D,{data:V.value,style:{width:"100%"}},{default:a(()=>[e(r,{prop:"username",label:"用户名",width:"120"}),e(r,{prop:"name",label:"姓名",width:"120"}),e(r,{prop:"role",label:"角色",width:"120"},{default:a(({row:t})=>[e(ee,{type:q(t.role)},{default:a(()=>[u(ne(t.role),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"department",label:"部门",width:"120"}),e(r,{prop:"lastLogin",label:"最后登录",width:"180"}),e(r,{prop:"status",label:"状态",width:"100"},{default:a(({row:t})=>[e(F,{modelValue:t.status,"onUpdate:modelValue":_=>t.status=_,"active-value":1,"inactive-value":0,onChange:_=>G(t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(r,{label:"操作",width:"200"},{default:a(({row:t})=>[e(A,null,{default:a(()=>[e(p,{size:"small",onClick:_=>H(t)},{default:a(()=>[e(g,null,{default:a(()=>[e(y(h))]),_:1}),l[16]||(l[16]=u("编辑 "))]),_:2},1032,["onClick"]),e(p,{size:"small",type:"danger",onClick:_=>J(t)},{default:a(()=>[e(g,null,{default:a(()=>[e(y(I))]),_:1}),l[17]||(l[17]=u("删除 "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),c("div",me,[e(p,{type:"primary",onClick:K},{default:a(()=>[e(g,null,{default:a(()=>[e(y(L))]),_:1}),l[18]||(l[18]=u("添加账号 "))]),_:1})])]),_:1}),e(U,{label:"权限设置",name:"permission"},{default:a(()=>[e(D,{data:k.value,style:{width:"100%"}},{default:a(()=>[e(r,{prop:"name",label:"角色名称",width:"150"}),e(r,{prop:"description",label:"角色描述"}),e(r,{label:"权限配置",width:"300"},{default:a(({row:t})=>[e(le,{modelValue:t.permissions,"onUpdate:modelValue":_=>t.permissions=_},{default:a(()=>[e(T,{label:"dashboard"},{default:a(()=>l[19]||(l[19]=[u("首页概览")])),_:1}),e(T,{label:"registration"},{default:a(()=>l[20]||(l[20]=[u("登记管理")])),_:1}),e(T,{label:"care"},{default:a(()=>l[21]||(l[21]=[u("照护管理")])),_:1}),e(T,{label:"finance"},{default:a(()=>l[22]||(l[22]=[u("财务管理")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(r,{label:"操作",width:"150"},{default:a(({row:t})=>[e(A,null,{default:a(()=>[e(p,{size:"small",onClick:_=>P(t)},{default:a(()=>[e(g,null,{default:a(()=>[e(y(h))]),_:1}),l[23]||(l[23]=u("编辑 "))]),_:2},1032,["onClick"]),e(p,{size:"small",type:"danger",onClick:_=>Q(t)},{default:a(()=>[e(g,null,{default:a(()=>[e(y(I))]),_:1}),l[24]||(l[24]=u("删除 "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),c("div",re,[e(p,{type:"primary",onClick:W},{default:a(()=>[e(g,null,{default:a(()=>[e(y(L))]),_:1}),l[25]||(l[25]=u("添加角色 "))]),_:1})])]),_:1}),e(U,{label:"系统参数",name:"params"},{default:a(()=>[e(N,{model:m.value,"label-width":"160px"},{default:a(()=>[e(d,{label:"数据备份周期"},{default:a(()=>[e(z,{modelValue:m.value.backupCycle,"onUpdate:modelValue":l[4]||(l[4]=t=>m.value.backupCycle=t),style:{width:"200px"}},{default:a(()=>[e(B,{label:"每天",value:"daily"}),e(B,{label:"每周",value:"weekly"}),e(B,{label:"每月",value:"monthly"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"日志保留时间"},{default:a(()=>[e(R,{modelValue:m.value.logRetention,"onUpdate:modelValue":l[5]||(l[5]=t=>m.value.logRetention=t),min:1,max:365,style:{width:"200px"}},null,8,["modelValue"]),l[26]||(l[26]=c("span",{class:"param-unit"},"天",-1))]),_:1}),e(d,{label:"密码有效期"},{default:a(()=>[e(R,{modelValue:m.value.passwordExpiry,"onUpdate:modelValue":l[6]||(l[6]=t=>m.value.passwordExpiry=t),min:30,max:365,style:{width:"200px"}},null,8,["modelValue"]),l[27]||(l[27]=c("span",{class:"param-unit"},"天",-1))]),_:1}),e(d,{label:"会话超时时间"},{default:a(()=>[e(R,{modelValue:m.value.sessionTimeout,"onUpdate:modelValue":l[7]||(l[7]=t=>m.value.sessionTimeout=t),min:1,max:1440,style:{width:"200px"}},null,8,["modelValue"]),l[28]||(l[28]=c("span",{class:"param-unit"},"分钟",-1))]),_:1}),e(d,{label:"系统通知"},{default:a(()=>[e(F,{modelValue:m.value.enableNotification,"onUpdate:modelValue":l[8]||(l[8]=t=>m.value.enableNotification=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"]),c("div",pe,[e(p,{type:"primary",onClick:X},{default:a(()=>l[29]||(l[29]=[u("保存设置")])),_:1}),e(p,{onClick:Y},{default:a(()=>l[30]||(l[30]=[u("重置")])),_:1})]),e(te,{modelValue:x.value,"onUpdate:modelValue":l[15]||(l[15]=t=>x.value=t),title:C.value==="add"?"添加账号":"编辑账号",width:"500px"},{footer:a(()=>[e(p,{onClick:l[14]||(l[14]=t=>x.value=!1)},{default:a(()=>l[31]||(l[31]=[u("取消")])),_:1}),e(p,{type:"primary",onClick:O},{default:a(()=>l[32]||(l[32]=[u("确定")])),_:1})]),default:a(()=>[e(N,{model:s.value,"label-width":"80px"},{default:a(()=>[e(d,{label:"用户名"},{default:a(()=>[e(f,{modelValue:s.value.username,"onUpdate:modelValue":l[10]||(l[10]=t=>s.value.username=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"姓名"},{default:a(()=>[e(f,{modelValue:s.value.name,"onUpdate:modelValue":l[11]||(l[11]=t=>s.value.name=t)},null,8,["modelValue"])]),_:1}),e(d,{label:"角色"},{default:a(()=>[e(z,{modelValue:s.value.role,"onUpdate:modelValue":l[12]||(l[12]=t=>s.value.role=t),style:{width:"100%"}},{default:a(()=>[(w(!0),$(ue,null,se(k.value,t=>(w(),M(B,{key:t.name,label:t.name,value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"部门"},{default:a(()=>[e(f,{modelValue:s.value.department,"onUpdate:modelValue":l[13]||(l[13]=t=>s.value.department=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},be=oe(fe,[["__scopeId","data-v-2955f9a0"]]);export{be as default};
