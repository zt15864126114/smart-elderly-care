import{_ as be,j as i,k as F,O as _e,D as he,P as xe,r as u,l as Ve,o as m,c as v,a as n,b as t,w as a,Q as Te,e as d,u as Ce,n as De,p as H,F as x,q as V,t as f,v as P,G as Q,x as W,B as Se}from"./index-41d7d98c.js";const we={class:"health-record"},ke={class:"header"},Ee={class:"table-operations"},He={class:"pagination"},Ue={class:"card-header"},ze={class:"card-content"},Oe={__name:"HealthRecord",setup(Re){const y=i("list");i(new Date);const U=i(""),q=i(1),L=i(10),X=i(!1),z=i(null),O=i(null);let T=null,C=null;const b=i(!1),c=i("add"),R=i(null),o=i({name:"",room:"",age:"",bloodType:"",chronicDiseases:[],healthStatus:"",medicalHistory:"",allergies:"",emergencyContact:"",examType:"",items:[],doctor:"",result:"",suggestion:""}),G={name:[{required:!0,message:"请输入姓名",trigger:"blur"}],room:[{required:!0,message:"请输入房间号",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"}],bloodType:[{required:!0,message:"请选择血型",trigger:"change"}],healthStatus:[{required:!0,message:"请选择健康状况",trigger:"change"}],emergencyContact:[{required:!0,message:"请输入紧急联系人",trigger:"blur"}]},J=["A","B","O","AB"],K=["良好","稳定","需注意"],Y=["高血压","糖尿病","心脏病","关节炎","骨质疏松","帕金森","阿尔茨海默病","哮喘","白内障","冠心病"],Z=["常规体检","专项检查","复查"],ee=["血常规","血压测量","心电图","血糖检测","骨密度测量","血钙检测","维生素D检测","步态评估","运动功能测试","视力检查","眼压测量","眼底检查","肺功能测试"],_=i([{id:"1",name:"张建国",room:"301",age:"75",bloodType:"A",chronicDiseases:["高血压","糖尿病"],lastExamDate:"2025-02-15",healthStatus:"良好",medicalHistory:"2023年做过心脏支架手术",allergies:"对青霉素过敏",emergencyContact:"张小明（儿子）13800138000"},{id:"2",name:"王淑芬",room:"302",age:"68",bloodType:"B",chronicDiseases:["高血压","关节炎"],lastExamDate:"2025-02-10",healthStatus:"稳定",medicalHistory:"长期高血压病史",allergies:"无",emergencyContact:"王丽（女儿）13900139000"},{id:"3",name:"李桂芝",room:"303",age:"72",bloodType:"O",chronicDiseases:["心脏病","骨质疏松"],lastExamDate:"2025-02-18",healthStatus:"需注意",medicalHistory:"2022年髋关节置换",allergies:"海鲜过敏",emergencyContact:"李强（儿子）13911112222"},{id:"4",name:"赵明德",room:"305",age:"80",bloodType:"AB",chronicDiseases:["帕金森","高血压"],lastExamDate:"2025-02-12",healthStatus:"稳定",medicalHistory:"长期服用降压药",allergies:"无",emergencyContact:"赵海燕（女儿）13922223333"},{id:"5",name:"孙秀兰",room:"306",age:"69",bloodType:"A",chronicDiseases:["糖尿病","白内障"],lastExamDate:"2025-02-20",healthStatus:"良好",medicalHistory:"2023年白内障手术",allergies:"磺胺类药物过敏",emergencyContact:"孙伟（儿子）13933334444"},{id:"6",name:"王德福",room:"308",age:"78",bloodType:"B",chronicDiseases:["冠心病","前列腺肥大"],lastExamDate:"2025-02-16",healthStatus:"稳定",medicalHistory:"2021年做过心脏搭桥手术",allergies:"无",emergencyContact:"王建国（儿子）13944445555"},{id:"7",name:"张玉珍",room:"310",age:"71",bloodType:"A",chronicDiseases:["哮喘","骨关节炎"],lastExamDate:"2025-02-19",healthStatus:"稳定",medicalHistory:"支气管哮喘10年史",allergies:"花粉过敏",emergencyContact:"张明（儿子）13955556666"},{id:"8",name:"刘长海",room:"311",age:"82",bloodType:"B",chronicDiseases:["阿尔茨海默病","高血压"],lastExamDate:"2025-02-17",healthStatus:"需注意",medicalHistory:"2020年确诊阿尔茨海默病",allergies:"无",emergencyContact:"刘芳（女儿）13966667777"},{id:"9",name:"陈德华",room:"312",age:"77",bloodType:"O",chronicDiseases:["冠心病","糖尿病","高血压"],lastExamDate:"2025-02-21",healthStatus:"需注意",medicalHistory:"2021年冠脉支架植入，糖尿病史15年",allergies:"对磺胺类药物过敏",emergencyContact:"陈晓明（儿子）13977778888"},{id:"10",name:"刘淑英",room:"315",age:"73",bloodType:"A",chronicDiseases:["骨质疏松","白内障","高血压"],lastExamDate:"2025-02-22",healthStatus:"稳定",medicalHistory:"2023年右眼白内障手术",allergies:"无",emergencyContact:"刘洋（儿子）13988889999"},{id:"11",name:"王金凤",room:"316",age:"81",bloodType:"B",chronicDiseases:["帕金森","骨关节炎"],lastExamDate:"2025-02-23",healthStatus:"需注意",medicalHistory:"帕金森病史5年，定期服用左旋多巴",allergies:"对花生过敏",emergencyContact:"王建军（儿子）13999990000"},{id:"12",name:"张宝华",room:"318",age:"79",bloodType:"AB",chronicDiseases:["慢性支气管炎","前列腺增生"],lastExamDate:"2025-02-24",healthStatus:"稳定",medicalHistory:"支气管炎反复发作20年",allergies:"对青霉素过敏",emergencyContact:"张伟（儿子）13900001111"}]),B=i([{id:"1",date:"2025-02-15",name:"张建国",examType:"常规体检",items:["血常规","血压测量","心电图","血糖检测"],doctor:"李医生",status:"已完成",result:"血压偏高，其他指标正常",suggestion:"建议控制饮食，规律服药"},{id:"2",date:"2025-02-10",name:"王淑芬",examType:"专项检查",items:["关节检查","血压测量","X光检查"],doctor:"张医生",status:"已完成",result:"关节活动度良好，血压正常",suggestion:"建议继续保持，适当运动"},{id:"3",date:"2025-02-18",name:"李桂芝",examType:"骨密度检查",items:["骨密度测量","血钙检测","维生素D检测"],doctor:"王医生",status:"已完成",result:"骨密度略低，维生素D不足",suggestion:"补充钙剂和维生素D，适当进行户外活动"},{id:"4",date:"2025-02-12",name:"赵明德",examType:"神经系统检查",items:["步态评估","运动功能测试","血压监测"],doctor:"陈医生",status:"已完成",result:"步态稳定性一般，血压控制良好",suggestion:"继续服用降压药，加强平衡训练"},{id:"5",date:"2025-02-20",name:"孙秀兰",examType:"眼科复查",items:["视力检查","眼压测量","眼底检查"],doctor:"刘医生",status:"已完成",result:"术后恢复良好，视力提升明显",suggestion:"注意用眼卫生，定期复查"},{id:"6",date:"2025-02-19",name:"张玉珍",examType:"呼吸系统检查",items:["肺功能测试","支气管反应性测试","血氧饱和度监测"],doctor:"周医生",status:"已完成",result:"肺功能轻度受限，支气管反应性增高",suggestion:"规律用药，避免接触过敏原"},{id:"7",date:"2025-02-21",name:"陈德华",examType:"心脏检查",items:["心电图","血压监测","血脂检查","血糖检测"],doctor:"赵医生",status:"已完成",result:"血压偏高，血糖控制一般",suggestion:"调整降压药物剂量，加强血糖监测"},{id:"8",date:"2025-02-22",name:"刘淑英",examType:"骨科检查",items:["骨密度测量","X光检查","关节活动度评估"],doctor:"孙医生",status:"已完成",result:"骨密度T值-2.8，关节活动度良好",suggestion:"继续补钙和维生素D，保持适度运动"},{id:"9",date:"2025-02-23",name:"王金凤",examType:"神经内科检查",items:["步态评估","肌力测试","震颤评估"],doctor:"李医生",status:"已完成",result:"步态不稳，轻度震颤",suggestion:"调整药物方案，加强平衡训练"},{id:"10",date:"2025-02-24",name:"张宝华",examType:"呼吸系统检查",items:["肺功能测试","血氧饱和度监测","痰液检查"],doctor:"王医生",status:"已完成",result:"肺功能中度受限，无感染征象",suggestion:"保持规律用药，注意保暖防寒"}]),N=F(()=>{const s=U.value.toLowerCase();return _.value.filter(l=>l.name.toLowerCase().includes(s)||l.room.toLowerCase().includes(s))}),le=F(()=>N.value.length),te=s=>{switch(s){case"良好":return"success";case"稳定":return"warning";case"需注意":return"danger";default:return"info"}},M=s=>{switch(s){case"已完成":return"success";case"进行中":return"warning";case"未开始":return"info";default:return""}},$=()=>{Te(()=>{y.value==="stats"&&(z.value&&(T=Q(z.value),T.setOption({title:{text:"慢性病分布",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c}人 ({d}%)"},legend:{orient:"horizontal",bottom:"5%",left:"center"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {c}人"},data:[{value:15,name:"高血压"},{value:10,name:"糖尿病"},{value:8,name:"心脏病"},{value:12,name:"关节炎"},{value:5,name:"其他"}]}]})),O.value&&(C=Q(O.value),C.setOption({title:{text:"健康状况分布",left:"center"},tooltip:{trigger:"item",formatter:"{b}: {c}人 ({d}%)"},legend:{orient:"horizontal",bottom:"5%",left:"center"},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!0,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {c}人"},data:[{value:_.value.filter(s=>s.healthStatus==="良好").length,name:"良好",itemStyle:{color:"#67C23A"}},{value:_.value.filter(s=>s.healthStatus==="稳定").length,name:"稳定",itemStyle:{color:"#E6A23C"}},{value:_.value.filter(s=>s.healthStatus==="需注意").length,name:"需注意",itemStyle:{color:"#F56C6C"}}]}]})))})};_e(y,s=>{s==="stats"&&$()}),he(()=>{y.value==="stats"&&$(),window.addEventListener("resize",()=>{T&&T.resize(),C&&C.resize()})}),xe(()=>{T&&T.dispose(),C&&C.dispose()});const ae=()=>{c.value="add",o.value={name:"",room:"",age:"",bloodType:"",chronicDiseases:[],healthStatus:"",medicalHistory:"",allergies:"",emergencyContact:"",examType:"",items:[],doctor:"",result:"",suggestion:""},b.value=!0},oe=s=>{c.value="edit",o.value={...s},b.value=!0},se=s=>{c.value="view",o.value={...s},b.value=!0},ne=s=>{c.value="add",y.value="exam",o.value={name:s.name,room:s.room,examType:"",items:[],doctor:"",status:"未开始",result:"",suggestion:""},b.value=!0},ue=async()=>{R.value&&await R.value.validate(s=>{if(s){if(c.value==="add"){if(y.value==="exam"){const l=Math.max(...B.value.map(D=>Number(D.id))),p=String(l+1);B.value.push({id:p,date:new Date().toISOString().split("T")[0],...o.value,status:"未开始"})}else{const l=Math.max(..._.value.map(D=>Number(D.id))),p=String(l+1);_.value.push({id:p,...o.value,lastExamDate:new Date().toISOString().split("T")[0]})}W.success("添加成功")}else if(c.value==="edit"){const l=_.value.findIndex(p=>p.id===o.value.id);l!==-1&&(_.value[l]={...o.value},W.success("修改成功"))}b.value=!1}})};return(s,l)=>{const p=u("el-button"),D=u("el-icon"),g=u("el-input"),h=u("el-table-column"),A=u("el-tag"),re=u("el-table"),ie=u("el-pagination"),I=u("el-tab-pane"),E=u("el-card"),de=u("el-timeline-item"),me=u("el-timeline"),j=u("el-col"),pe=u("el-row"),ce=u("el-tabs"),r=u("el-form-item"),S=u("el-option"),w=u("el-select"),ge=u("el-divider"),ve=u("el-form"),fe=u("el-dialog"),ye=Ve("loading");return m(),v("div",we,[n("div",ke,[l[21]||(l[21]=n("h2",null,"健康档案",-1)),t(p,{type:"primary",onClick:ae},{default:a(()=>l[20]||(l[20]=[d("新增体检记录")])),_:1})]),t(E,{class:"mt-20"},{default:a(()=>[t(ce,{modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=e=>y.value=e)},{default:a(()=>[t(I,{label:"档案列表",name:"list"},{default:a(()=>[n("div",Ee,[t(g,{modelValue:U.value,"onUpdate:modelValue":l[0]||(l[0]=e=>U.value=e),placeholder:"请输入姓名或房间号搜索",style:{width:"300px"},clearable:""},{prefix:a(()=>[t(D,null,{default:a(()=>[t(Ce(Se))]),_:1})]),_:1},8,["modelValue"])]),De((m(),H(re,{data:N.value,style:{width:"100%"}},{default:a(()=>[t(h,{prop:"name",label:"老人姓名",width:"120"}),t(h,{prop:"room",label:"房间号",width:"100"}),t(h,{prop:"age",label:"年龄",width:"80"}),t(h,{prop:"bloodType",label:"血型",width:"80"}),t(h,{prop:"chronicDiseases",label:"慢性病史"},{default:a(({row:e})=>[(m(!0),v(x,null,V(e.chronicDiseases,k=>(m(),H(A,{key:k,class:"mx-1",size:"small",type:"warning"},{default:a(()=>[d(f(k),1)]),_:2},1024))),128))]),_:1}),t(h,{prop:"lastExamDate",label:"最近体检",width:"180",sortable:""}),t(h,{prop:"healthStatus",label:"健康状况",width:"120"},{default:a(({row:e})=>[t(A,{type:te(e.healthStatus)},{default:a(()=>[d(f(e.healthStatus),1)]),_:2},1032,["type"])]),_:1}),t(h,{label:"操作",width:"250",fixed:"right"},{default:a(({row:e})=>[t(p,{type:"primary",size:"small",onClick:k=>se(e)},{default:a(()=>l[22]||(l[22]=[d("查看")])),_:2},1032,["onClick"]),t(p,{type:"success",size:"small",onClick:k=>ne(e)},{default:a(()=>l[23]||(l[23]=[d("体检")])),_:2},1032,["onClick"]),t(p,{type:"warning",size:"small",onClick:k=>oe(e)},{default:a(()=>l[24]||(l[24]=[d("编辑")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ye,X.value]]),n("div",He,[t(ie,{"current-page":q.value,"onUpdate:currentPage":l[1]||(l[1]=e=>q.value=e),"page-size":L.value,"onUpdate:pageSize":l[2]||(l[2]=e=>L.value=e),"page-sizes":[10,20,50,100],total:le.value,layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])]),_:1}),t(I,{label:"体检记录",name:"exam"},{default:a(()=>[t(me,null,{default:a(()=>[(m(!0),v(x,null,V(B.value,e=>(m(),H(de,{key:e.id,timestamp:e.date,type:M(e.status)},{default:a(()=>[t(E,{class:"timeline-card"},{header:a(()=>[n("div",Ue,[n("span",null,f(e.name)+" - "+f(e.examType),1),t(A,{size:"small",type:M(e.status)},{default:a(()=>[d(f(e.status),1)]),_:2},1032,["type"])])]),default:a(()=>[n("div",ze,[n("p",null,[l[25]||(l[25]=n("strong",null,"检查项目：",-1)),d(f(e.items.join("、")),1)]),n("p",null,[l[26]||(l[26]=n("strong",null,"检查医生：",-1)),d(f(e.doctor),1)]),n("p",null,[l[27]||(l[27]=n("strong",null,"检查结果：",-1)),d(f(e.result),1)]),n("p",null,[l[28]||(l[28]=n("strong",null,"建议：",-1)),d(f(e.suggestion),1)])])]),_:2},1024)]),_:2},1032,["timestamp","type"]))),128))]),_:1})]),_:1}),t(I,{label:"健康统计",name:"stats"},{default:a(()=>[t(pe,{gutter:20},{default:a(()=>[t(j,{span:12},{default:a(()=>[t(E,null,{header:a(()=>l[29]||(l[29]=[n("div",{class:"chart-header"},[n("span",null,"慢性病分布")],-1)])),default:a(()=>[n("div",{ref_key:"diseaseChartRef",ref:z,style:{height:"300px"}},null,512)]),_:1})]),_:1}),t(j,{span:12},{default:a(()=>[t(E,null,{header:a(()=>l[30]||(l[30]=[n("div",{class:"chart-header"},[n("span",null,"健康状况分布")],-1)])),default:a(()=>[n("div",{ref_key:"statusChartRef",ref:O,style:{height:"300px"}},null,512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(fe,{title:c.value==="add"?"新增体检记录":c.value==="edit"?"编辑健康档案":"档案详情",modelValue:b.value,"onUpdate:modelValue":l[19]||(l[19]=e=>b.value=e),width:"800px"},{footer:a(()=>[t(p,{onClick:l[18]||(l[18]=e=>b.value=!1)},{default:a(()=>l[32]||(l[32]=[d("取消")])),_:1}),c.value!=="view"?(m(),H(p,{key:0,type:"primary",onClick:ue},{default:a(()=>l[33]||(l[33]=[d(" 确定 ")])),_:1})):P("",!0)]),default:a(()=>[t(ve,{ref_key:"formRef",ref:R,model:o.value,rules:G,"label-width":"120px",disabled:c.value==="view"},{default:a(()=>[t(r,{label:"姓名",prop:"name"},{default:a(()=>[t(g,{modelValue:o.value.name,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.name=e)},null,8,["modelValue"])]),_:1}),t(r,{label:"房间号",prop:"room"},{default:a(()=>[t(g,{modelValue:o.value.room,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.room=e)},null,8,["modelValue"])]),_:1}),t(r,{label:"年龄",prop:"age"},{default:a(()=>[t(g,{modelValue:o.value.age,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.age=e),type:"number"},null,8,["modelValue"])]),_:1}),t(r,{label:"血型",prop:"bloodType"},{default:a(()=>[t(w,{modelValue:o.value.bloodType,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.bloodType=e),placeholder:"请选择血型"},{default:a(()=>[(m(),v(x,null,V(J,e=>t(S,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"慢性病史",prop:"chronicDiseases"},{default:a(()=>[t(w,{modelValue:o.value.chronicDiseases,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.chronicDiseases=e),multiple:"",placeholder:"请选择慢性病史"},{default:a(()=>[(m(),v(x,null,V(Y,e=>t(S,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"健康状况",prop:"healthStatus"},{default:a(()=>[t(w,{modelValue:o.value.healthStatus,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.healthStatus=e),placeholder:"请选择健康状况"},{default:a(()=>[(m(),v(x,null,V(K,e=>t(S,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"既往病史",prop:"medicalHistory"},{default:a(()=>[t(g,{modelValue:o.value.medicalHistory,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.medicalHistory=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(r,{label:"过敏史",prop:"allergies"},{default:a(()=>[t(g,{modelValue:o.value.allergies,"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.allergies=e)},null,8,["modelValue"])]),_:1}),t(r,{label:"紧急联系人",prop:"emergencyContact"},{default:a(()=>[t(g,{modelValue:o.value.emergencyContact,"onUpdate:modelValue":l[12]||(l[12]=e=>o.value.emergencyContact=e)},null,8,["modelValue"])]),_:1}),y.value==="exam"?(m(),v(x,{key:0},[t(ge,null,{default:a(()=>l[31]||(l[31]=[d("体检信息")])),_:1}),t(r,{label:"体检类型",prop:"examType"},{default:a(()=>[t(w,{modelValue:o.value.examType,"onUpdate:modelValue":l[13]||(l[13]=e=>o.value.examType=e),placeholder:"请选择体检类型"},{default:a(()=>[(m(),v(x,null,V(Z,e=>t(S,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"检查项目",prop:"items"},{default:a(()=>[t(w,{modelValue:o.value.items,"onUpdate:modelValue":l[14]||(l[14]=e=>o.value.items=e),multiple:"",placeholder:"请选择检查项目"},{default:a(()=>[(m(),v(x,null,V(ee,e=>t(S,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"检查医生",prop:"doctor"},{default:a(()=>[t(g,{modelValue:o.value.doctor,"onUpdate:modelValue":l[15]||(l[15]=e=>o.value.doctor=e)},null,8,["modelValue"])]),_:1}),t(r,{label:"检查结果",prop:"result"},{default:a(()=>[t(g,{modelValue:o.value.result,"onUpdate:modelValue":l[16]||(l[16]=e=>o.value.result=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(r,{label:"医生建议",prop:"suggestion"},{default:a(()=>[t(g,{modelValue:o.value.suggestion,"onUpdate:modelValue":l[17]||(l[17]=e=>o.value.suggestion=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1})],64)):P("",!0)]),_:1},8,["model","disabled"])]),_:1},8,["title","modelValue"])])}}},Ae=be(Oe,[["__scopeId","data-v-175dc0af"]]);export{Ae as default};
